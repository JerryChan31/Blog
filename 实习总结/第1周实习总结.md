# 第一周实习总结
11.21 - 11.30

实习的第一周还是以熟悉环境、熟悉项目代码为主。

团队目前在做的是一个基于Nuxt构建的PC端的影评项目，项目做了许多非常新的尝试，例如SSR服务端渲染，页面直出SEO优化，首屏骨架屏懒加载等等。
团队目前已经实现组件化开发，并将通用组件封装成组件库。一些常用组件做了插件化，例如数据记录埋点、常用的安全获取对象属性的方法等。

由于我是星期三到公司报到的，所以一开始两三天也没有安排具体任务，只是让我阅读项目代码。在阅读代码的过程中比较留意的主要有两个：一个是Nuxt项目的组织结构，另一个是懒加载通用组件的实现方式。

## 知识点1：Nuxt项目的组织结构
Nuxt.js 是一个基于 Vue.js 的通用应用框架。Nuxt.js 预设了利用Vue.js开发**服务端渲染**的应用所需要的各种配置。并且为**客户端/服务端**这种典型的应用架构模式提供了许多有用的特性，例如异步数据加载、中间件支持、布局支持等。更多关于 Nuxt.js 的信息请查看[Nuxt.js 是什么？](https://zh.nuxtjs.org/guide)

之前一直接触的都是基于 Vue-cli 构建的项目，相对 Nuxt 来说比较轻量，没有非常明确的项目组织规范。而 Nuxt.js 有它的一套项目组织规范。它的意义在于能够更好地组织代码文件，易于维护和多人协作；基于规范自动实现路由功能等。下面是我对Nuxt目录结构的简单总结：

1. 资源目录(assets): 存放需要通过 Webpack 编译处理的资源文件。我们公司的项目里放的主要是 SASS 编译后的 CSS 文件、雪碧图(sprites)、字体、Logo等。
2. 组件目录(components): 存放组件。我们公司项目里的组件是对应pages目录存放的，如：`@/pages/videos/_id/index.vue` 中用到的组件会放在 `@/components/videos/` 中。
3. 布局目录(layouts): 布局目录 layouts 用于组织应用的布局组件。
4. 中间件目录(middleware): 目录用于存放应用的中间件。我们公司的项目用到的中间件的主要是用户登录态检验相关的。
5. 页面目录(pages): 页面目录 pages 用于组织应用的路由及视图。Nuxt.js 框架读取该目录下所有的 .vue 文件并自动生成对应的路由配置。
6. 插件目录(plugins): 插件目录 plugins 用于组织那些需要在 根vue.js应用 实例化之前需要运行的 Javascript 插件。
7. 静态文件目录(static): 静态文件目录 static 用于存放应用的静态文件，此类文件不会被 Nuxt.js 调用 Webpack 进行构建编译处理。服务器启动的时候，该目录下的文件会映射至应用的根路径 / 下。
8. Store目录(store): 目录用于组织应用的 Vuex 状态树 文件。 Nuxt.js 框架集成了 Vuex 状态树 的相关功能配置，在 store 目录下创建一个 index.js 文件可激活这些配置。
9. nuxt.config.js 文件: nuxt.config.js 文件用于组织Nuxt.js 应用的个性化配置，以便覆盖默认配置。
10. package.json 文件: package.json 文件用于描述应用的依赖关系和对外暴露的脚本接口。项目版本、依赖库的版本都在这个文件里面。

更详细的组织结构知识见：[Nuxt.js 目录结构](https://zh.nuxtjs.org/guide/directory-structure)

## 知识点2：懒加载通用组件的实现方式

这个组件已在GitHub上开源：[Vue.js 2.x 组件级懒加载方案](https://github.com/xunleif2e/vue-lazy-component)

具体的实现方式：
1. 通过IntersectionObserver的API来监视组件和窗口的交叉情况（是否出现）。
2. 视口作了拓宽处理，使得组件在即将进入视口时就开始加载。
3. 组件与视口发生交叉后，开始加载组件资源。
4. 组件资源加载完成后，默认地会开始重绘，重绘过程在主线程中执行，容易卡顿。于是将重绘的过程放到`requestAnimationFrame`的回调中延后执行。
5. 同时为了防止等待太久没有执行回调，设置了最大等待时间，保证内容能正常显示。（存疑）
6. 通过`v-if`来控制插槽外`<div>`的渲染，从而达到切换骨架屏和实际内容的目的。


星期四下午参加了第一次的需求评审会。需求评审会的大概过程就是产品、开发、测试坐到一起，产品先介绍需求，开发来评审这个需求如何实现，由谁实现，最后进行开发的排期。

## 知识点3：需求评审要考虑的问题————从需求到开发

1. 需求的优先级：优先级常常和需求的目的、作用有关。
拿这个影评项目来说，所有需求的终极目的是提升用户量和用户活跃度，那么需要考虑的就是哪一个需求对提升这两点的作用是最大的。例如这一期有一个新版首页的需求，在原先首页的基础上加入了评分信息、个性化推荐、收藏、榜单排行等新功能。这个需求被放在了第一位，我觉得原因有以下几点：
 - 首页是整个项目最直接的呈现，是项目内容的综合呈现，因此这个需求能够最直接地增强用户体验。
 - 效果立竿见影，作用直观。
 - 首页作为流量入口，可以给其他板块导流。

2. 需求分工：谁来做这个需求？
这里的分工包括了两个层面，一个是团队层面，另一个是个人层面。
 - **从团队来讲，Leader要考虑这个需求自己团队做是否合适，或者是否由别的团队做更合适。**如这次评审会有一个抽奖活动的需求，我们的项目比较新，之前没有做过抽奖的活动，而另外一个团队则做过很多次抽奖活动，可以直接复用代码，无需重新造轮子。出于工作效率的考虑，这样的需求交由他们负责会更好。最后经过团队之间的协商，抽奖的系统由另外的团队负责，我们的团队负责页面外观等表现层的实现。
 - **个人层面来说，需要考虑的是个人能力、排期以及业务熟悉程度。**像我这种刚刚进入公司的实习生，分配到的需求就比较简单，也方便在比较简单的需求中逐渐地熟悉业务。一般来说，旧业务上的优化需求由之前负责开发的人来做，可以稍微减少沟通上的时间成本。一些比较复杂的需求可能会让排期空挡相对完整的人来开发。

第一周下来觉得值得记录的点就这些啦~